{% extends 'base.html' %}

{% block styles %}
    {% load static %}
    {% load crispy_forms_tags %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
{% endblock %}
{% block title %} Map of Cities Tiles {% endblock %}

{% block content %}

      <div class="container mt-4">
        <h2>Carte interactive des villes</h2>
        <div id="map" style="height: 500px;"></div>
        <div id="city-info" class="mt-3"></div>
      </div>


{% endblock %}

{% block scripts %}
    <!-- MapLibre -->
    <link href="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.css" rel="stylesheet" />
    <script src="https://unpkg.com/maplibre-gl@3.5.2/dist/maplibre-gl.js"></script>
    <script>
  const map = new maplibregl.Map({
    container: 'map',
    style: {
      "version": 8,
      "sources": {
        "roads": {
          "type": "vector",
          "tiles": ["/tiles/roads/{z}/{x}/{y}.pbf"],
          "minzoom": 0,
          "maxzoom": 14
        }
      },
      "layers": [{
        "id": "roads-layer",
        "type": "line",
        "source": "roads",
        "source-layer": "roads", // même nom que le model en minuscule par défaut
        "paint": {
          "line-color": "#ff0000",
          "line-width": 2
        }
      }]
    },
    center: [2.3522, 48.8566],
    zoom: 12
  });
</script>
{% endblock %}